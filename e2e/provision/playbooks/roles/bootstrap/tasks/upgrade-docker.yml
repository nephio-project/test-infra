---
# SPDX-license-identifier: Apache-2.0
##############################################################################
# Copyright (c) 2025 The Nephio Authors.
# All rights reserved. This program and the accompanying materials
# are made available under the terms of the Apache License, Version 2.0
# which accompanies this distribution, and is available at
# http://www.apache.org/licenses/LICENSE-2.0
##############################################################################

- name: Upgrade Docker to version supporting API 1.44+
  become: true
  ansible.builtin.package:
    name:
      - docker-ce=5:27.4.1-1~ubuntu.24.04~noble
      - docker-ce-cli=5:27.4.1-1~ubuntu.24.04~noble
      - containerd.io
    state: present
  when: ansible_os_family == 'Debian'

- name: Upgrade Docker to version supporting API 1.44+ (RedHat)
  become: true
  ansible.builtin.dnf:
    name:
      - docker-ce-27.4.1
      - docker-ce-cli-27.4.1
      - containerd.io
    state: present
  when: ansible_os_family == 'RedHat'
